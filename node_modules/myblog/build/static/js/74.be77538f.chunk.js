"use strict";(self.webpackChunkmyblog=self.webpackChunkmyblog||[]).push([[74],{74:(e,t,a)=>{a.r(t),a.d(t,{default:()=>o});var s=a(205),c=a(489),n=a(713);const o=function(){const[e,t]=(0,s.useState)([]),[a,o]=(0,s.useState)(!0),[r,i]=(0,s.useState)(null),l=(0,c.Zp)(),d=(0,s.useCallback)(async()=>{try{const e=localStorage.getItem("authToken"),a=await fetch("https://your-backend-service.onrender.com/admin/contacts",{headers:{Authorization:`Bearer ${e}`}});if(!a.ok)throw new Error("Failed to fetch contacts");const s=await a.json();t(s)}catch(e){i(e.message)}finally{o(!1)}},[]),h=(0,s.useCallback)(async()=>{const e=localStorage.getItem("authToken");if(e)try{if(!(await fetch("https://your-backend-service.onrender.com/auth/verify",{headers:{Authorization:`Bearer ${e}`}})).ok)throw new Error("Authentication failed");d()}catch(t){localStorage.removeItem("authToken"),l("/login")}else l("/login")},[l,d]);return(0,s.useEffect)(()=>{h()},[h]),a?(0,n.jsx)("div",{className:"admin-loading",children:"Loading contacts..."}):r?(0,n.jsxs)("div",{className:"admin-error",children:["Error: ",r]}):(0,n.jsxs)("div",{className:"admin-dashboard",children:[(0,n.jsx)("h1",{children:"Contact Form Submissions"}),(0,n.jsxs)("div",{className:"contacts-list",children:[e.map(e=>(0,n.jsxs)("div",{className:`contact-card status-${e.status}`,children:[(0,n.jsxs)("div",{className:"contact-header",children:[(0,n.jsx)("h3",{children:e.subject}),(0,n.jsx)("span",{className:"contact-date",children:new Date(e.createdAt).toLocaleDateString()})]}),(0,n.jsxs)("div",{className:"contact-info",children:[(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"From:"})," ",e.name," (",e.email,")"]}),(0,n.jsx)("p",{className:"contact-message",children:e.message})]}),(0,n.jsxs)("div",{className:"contact-actions",children:[(0,n.jsxs)("select",{value:e.status,onChange:t=>(async(e,t)=>{try{const a=localStorage.getItem("authToken");if(!(await fetch(`https://your-backend-service.onrender.com/admin/contacts/${e}`,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`},body:JSON.stringify({status:t})})).ok)throw new Error("Failed to update contact status");d()}catch(a){i(a.message)}})(e._id,t.target.value),className:`status-select status-${e.status}`,children:[(0,n.jsx)("option",{value:"unread",children:"Unread"}),(0,n.jsx)("option",{value:"read",children:"Read"}),(0,n.jsx)("option",{value:"responded",children:"Responded"})]}),(0,n.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this contact?"))try{const t=localStorage.getItem("authToken");if(!(await fetch(`https://your-backend-service.onrender.com/admin/contacts/${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${t}`}})).ok)throw new Error("Failed to delete contact");d()}catch(t){i(t.message)}})(e._id),className:"delete-button",children:"Delete"})]})]},e._id)),0===e.length&&(0,n.jsx)("div",{className:"no-contacts",children:"No contact form submissions yet."})]})]})}}}]);
//# sourceMappingURL=74.be77538f.chunk.js.map